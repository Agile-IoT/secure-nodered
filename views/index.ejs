<html>
<!--
# Copyright (C) 2017 UNI Passau, FBK.
# All rights reserved. This program and the accompanying materials
# are made available under the terms of the Eclipse Public License v1.0
# which accompanies this distribution, and is available at
# http://www.eclipse.org/legal/epl-v10.html
# 
# Contributors:
#     UNI Passau, FBK - initial API and implementation
-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script>
var redPath = "<%= path %>";
var body = {
    client_id: "<%= client_id %>",
    grant_type: "password",
    username : "<%= user %>",
    password: "<%= password %>",
    scope:""
};
$.ajax({
    url: redPath + "/auth/token",
    type: "POST",
    data: body
}).done(function(data,textStatus,xhr) {
    localStorage.setItem("auth-tokens",JSON.stringify(data));
    window.location = "/red/";
}).fail(function(jqXHR,textStatus,errorThrown) {
    console.log("could not authenticate!");
    alert("could not authenticate with Node-RED "+JSON.stringify(errorThrown));
})

</script>

</html>
